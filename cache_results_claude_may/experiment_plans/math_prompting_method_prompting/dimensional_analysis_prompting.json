{
    "topic_description": "novel prompting methods for large language models to improve mathematical problem solving",
    "idea_name": "Dimensional Analysis Prompting",
    "raw_idea": {
        "Problem": "Large language models can solve mathematical and scientific problems when the numbers are provided, but often fail to work out the relations between physical quantities and derive new quantities from known ones.",
        "Existing Methods": "Benchmarks like ScienceQA and Fermi Questions contain problems that require reasoning about physical quantities and dimensions. Most existing methods do not explicitly perform dimensional analysis when solving such problems.",
        "Motivation": "Dimensional analysis is a powerful problem solving strategy in math and science that focuses on the units of quantities and uses their relations to guide equation formulation and solution. We hypothesize that prompting LLMs to perform dimensional analysis can expand their capabilities in scientific problem solving.",
        "Proposed Method": "We propose Dimensional Analysis Prompting (DAP) which first prompts LLMs to identify the relevant physical quantities in the problem and specify their units. It then prompts LLMs to reason about unit conversions and derive the dimensionally consistent equations that relate the quantities. Finally, it prompts LLMs to solve the equations to obtain the numerical answer.",
        "Experiment Plan": "Evaluate DAP on scientific problem solving benchmarks like ScienceQA and Fermi Questions. Compare with vanilla chain-of-thought prompting to study the impact of explicit dimensional analysis on solution quality. Perform case studies to understand the types of problems where dimensional analysis is most effective."
    },
    "full_experiment_plan": {
        "Title": "Dimensional Analysis Prompting for Improved Mathematical Problem Solving in Large Language Models",
        "Problem Statement": "Large language models can solve mathematical and scientific problems when the numbers are provided, but often fail to work out the relations between physical quantities and derive new quantities from known ones.",
        "Motivation": "Benchmarks like ScienceQA and Fermi Questions contain problems that require reasoning about physical quantities and dimensions. Most existing methods do not explicitly perform dimensional analysis when solving such problems. Dimensional analysis is a powerful problem solving strategy in math and science that focuses on the units of quantities and uses their relations to guide equation formulation and solution. We hypothesize that prompting LLMs to perform dimensional analysis can expand their capabilities in scientific problem solving.",
        "Proposed Method": "We propose Dimensional Analysis Prompting (DAP) which first prompts LLMs to identify the relevant physical quantities in the problem and specify their units. It then prompts LLMs to reason about unit conversions and derive the dimensionally consistent equations that relate the quantities. Finally, it prompts LLMs to solve the equations to obtain the numerical answer.",
        "Step-by-Step Experiment Plan": {
            "Step 1: Gather Datasets": "Evaluate DAP on scientific problem solving benchmarks like ScienceQA and Fermi Questions. Use the official train/dev/test splits if available, otherwise randomly split the datasets into 80% train, 10% dev, 10% test.",
            "Step 2: Construct Prompts": "Baseline prompt is standard chain-of-thought (CoT) prompting, appending 'Let's solve this step-by-step:' to the question. DAP has three steps:\n1. Quantity Identification Prompt: Append 'Let's identify the relevant quantities and their units:' to the question.\n2. Equation Formulation Prompt: Append the quantities and units identified in step 1, and 'Using these quantities, let's derive the equations needed to solve the problem:' to the question.\n3. Final Answer Prompt: Append the equations derived in step 2 and 'Now let's solve these equations to get the final numerical answer:' to the question.",
            "Step 3: Select Models": "Evaluate GPT-3.5 (text-davinci-003) and GPT-4 via the OpenAI API.",
            "Step 4: Get Results": "For each example, prompt the model using the baseline CoT prompt and the 3-step DAP prompts. Compute the percentage of correct final answers for each prompting method on each dataset.",
            "Step 5: Analyze Results": "Compare the accuracy of DAP vs CoT prompting. Perform a paired t-test to check if the improvement with DAP is statistically significant (p < 0.05). Qualitatively analyze 50-100 examples to understand where DAP helps."
        },
        "Test Case Examples": {
            "Test Case 1": {
                "Question": "Estimate the number of moles of air in a typical classroom.",
                "Baseline CoT Prompt": "Estimate the number of moles of air in a typical classroom. Let's solve this step-by-step:",
                "Baseline CoT Output": "A typical classroom has dimensions of about 10m x 10m x 3m, so the volume is 300 cubic meters. We can estimate the number of moles using the ideal gas law PV=nRT. At sea level, P is about 101325 Pa. Room temperature is about 298K. The gas constant R is 8.314 J/mol*K. Plugging in the numbers:\n101325 Pa * 300 m^3 = n * 8.314 J/mol*K * 298 K\nSolving for n, we get n = 12200 moles.\nTherefore, a typical classroom contains approximately 12200 moles of air.",
                "DAP Quantity Prompt": "Estimate the number of moles of air in a typical classroom. Let's identify the relevant quantities and their units:",
                "DAP Quantity Output": "- Classroom dimensions: length (L) in meters, width (W) in meters, height (H) in meters\n- Classroom volume (V) in cubic meters\n- Air pressure (P) in Pascals \n- Temperature (T) in Kelvins\n- Amount of substance (n) in moles\n- Ideal gas constant (R) in J/(mol*K)",
                "DAP Equation Prompt": "Classroom dimensions: length (L) in meters, width (W) in meters, height (H) in meters\nClassroom volume (V) in cubic meters\nAir pressure (P) in Pascals\nTemperature (T) in Kelvins \nAmount of substance (n) in moles\nIdeal gas constant (R) in J/(mol*K)\nUsing these quantities, let's derive the equations needed to solve the problem:",
                "DAP Equation Output": "To find the number of moles of air, we can use the ideal gas law: PV = nRT\nWe can calculate the volume V of the classroom from its dimensions:\nV = L * W * H\nPlugging in this expression for V into the ideal gas law:\nP(L*W*H) = nRT\nRearranging to solve for n:\nn = P(L*W*H) / RT",
                "DAP Final Answer Prompt": "To find the number of moles of air, we can use the ideal gas law: PV = nRT\nWe can calculate the volume V of the classroom from its dimensions:\nV = L * W * H\nPlugging in this expression for V into the ideal gas law:\nP(L*W*H) = nRT\nRearranging to solve for n:\nn = P(L*W*H) / RT\nNow let's solve these equations to get the final numerical answer:",
                "DAP Final Answer Output": "Typical classroom dimensions are: L = 10 m, W = 10 m, H = 3 m\nVolume V = 10 m * 10 m * 3 m = 300 m^3\nAir pressure at sea level P = 101325 Pa\nRoom temperature T = 298 K\nIdeal gas constant R = 8.314 J/(mol*K)\nPlugging in the values:\nn = (101325 Pa)(300 m^3) / (8.314 J/(mol*K))(298 K)\n  = 30397500 Pa*m^3 / 2477.572 J/mol\n  = 12271 mol\nTherefore, a typical classroom contains approximately 12000 moles of air.",
                "Explanation": "The baseline CoT gets the correct approach and final answer. However, DAP breaks down the problem solving into clear steps - identify quantities, derive equations, plug in values and solve. Each step guides the model to focus on the relevant information and computations needed. The explicit unit analysis in DAP helps the model avoid mistakes in the ideal gas law formula and units. While not strictly needed for this problem, the systematic DAP approach is more reliable for complex problems."
            },
            "Test Case 2": {
                "Question": "How many 60W lightbulbs can be powered by a 1 megawatt power plant?",
                "Baseline CoT Prompt": "How many 60W lightbulbs can be powered by a 1 megawatt power plant? Let's solve this step-by-step:",
                "Baseline CoT Output": "1 megawatt is equal to 1,000,000 watts. To find the number of 60W bulbs that can be powered, we divide the total power by the power of each bulb:\n1,000,000 watts / 60 watts per bulb = 16,666.67 bulbs\nRounding down, a 1 megawatt power plant can power 16,666 60W lightbulbs.",
                "DAP Quantity Prompt": "How many 60W lightbulbs can be powered by a 1 megawatt power plant? Let's identify the relevant quantities and their units:",
                "DAP Quantity Output": "- Power plant capacity (P_plant) = 1 megawatt = 1,000,000 watts\n- Light bulb power rating (P_bulb) = 60 watts\n- Number of light bulbs (N_bulbs) - this is the quantity we need to solve for",
                "DAP Equation Prompt": "Power plant capacity (P_plant) = 1 megawatt = 1,000,000 watts\nLight bulb power rating (P_bulb) = 60 watts\nNumber of light bulbs (N_bulbs) - this is the quantity we need to solve for\nUsing these quantities, let's derive the equations needed to solve the problem:",
                "DAP Equation Output": "The total power used by the light bulbs must equal the power output of the plant:\nP_plant = N_bulbs * P_bulb\nRearranging this equation to solve for the number of bulbs:\nN_bulbs = P_plant / P_bulb",
                "DAP Final Answer Prompt": "The total power used by the light bulbs must equal the power output of the plant:\nP_plant = N_bulbs * P_bulb\nRearranging this equation to solve for the number of bulbs:\nN_bulbs = P_plant / P_bulb\nNow let's solve these equations to get the final numerical answer:",
                "DAP Final Answer Output": "P_plant = 1,000,000 W\nP_bulb = 60 W\nN_bulbs = 1,000,000 W / 60 W = 16,666.67\nRounding down to the nearest whole number, since we can't have a fraction of a bulb, the power plant can support 16,666 60W light bulbs.",
                "Explanation": "Both the baseline CoT and DAP get the correct final answer in this case. The main benefit of DAP is that it explicitly defines the variables and equations before plugging in the numbers. This makes the problem solving steps clearer and less error prone, especially for more complex problems with many quantities and equations. The explicit unit conversions in the quantity identification step of DAP also helps avoid unit mismatch errors."
            }
        },
        "Fallback Plan": "If DAP does not outperform CoT prompting, we can do the following:\n1. Analyze the failure cases to understand where DAP falls short. There could be issues in any of the three steps - quantity identification, equation formulation, final answer computation.\n2. Evaluate the correctness of the intermediate outputs (quantities and equations) in addition to the final answer. This can help isolate which step needs the most improvement.\n3. Try alternative prompt formulations for the DAP steps. The current prompts are quite minimal, additional instructions and examples could help.\n4. Investigate whether the performance varies significantly across different question types or topics. DAP might be helping more for certain types of problems.\n5. Study the impact of sampling temperature on the output quality. Higher temperature could increase the diversity of the outputs and help avoid getting stuck.\nIf the results are still negative after these additional experiments, we can reframe the paper as an analysis of the limitations of prompting for this task, and highlight the need for future work on more effective prompting methods or alternative approaches like finetuning."
    }
}